{% extends "page.html" %}
{% set homepage_style = ( g.homepage_style or '1' ) %}

{% block subtitle %}{{ _("Welcome") }}{% endblock %}

{% block maintag %}{% endblock %}
{% block toolbar %}{% endblock %}

{% block content %}
  <div class="homepage" role="main">
    <div id="content" class="container">
      <div class="flash-messages">
        {{ self.flash() }}
      </div>
      {% block primary_content %}
        <header>
          {% if intro %}
            {{ h.render_markdown(intro) }}
          {% else %}
            <h1 class="page-heading">{{ _("Welcome to CKAN") }}</h1>
            <p>
              {% trans %}This is a nice introductory paragraph about CKAN or the site
              in general. We don't have any copy to go here yet but soon we will
              {% endtrans %}
            </p>
          {% endif %}
        </header>
        <form class="module-content search-form" method="get" action="{% url_for controller='package', action='search' %}">
          <h3 class="heading">{{ _("Search by keyword") }}</h3>
          <div class="search-input control-group search-giant">
            <input type="text" class="search" name="q" value="" autocomplete="off" placeholder="{{ _('Search by keyword') }}" />
            <button type="submit">
              <i class="icon-search"></i>
              <span>{{ _('Search') }}</span>
            </button>
          </div>
        </form>
      {% endblock %}
      <section class="browse-category">
        {% set categories = h.get_categories() %}
        <h3>Browse by category</h3>
        <ul class="category-grid">
          {% for category in categories %}
            {% if category.count %}
              <li><a href="/dataset?topic-category={{ category.name }}">{{ category.short_title }}</a></li>
            {% else %}
              {# TODO: Differentiate the ones without any records #}
              <li><a href="#">{{ category.short_title }}</a></li>
            {% endif %}
          {% endfor %}
        </ul>
      </section>
    </div>
  </div>
{% endblock %}
